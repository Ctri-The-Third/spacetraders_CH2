<!doctype html>
<html lang="en">

{% include '_header.html' %}
<div class="container-fluid">
    <div class="row">
        <div class="col-md-12 col-lg-2">
            <h1>All trades <a onclick="socket.emit('fetch-trades');return false;">ðŸ”ƒ</a></h1>
            select ship:
            <select id="list_of_ship_symbols" onchange="fetch_ship();">
                {% for ship in ships %}
                <option value="{{ship.symbol}}">{{ship.symbol}}</option>
                {% endfor %}
            </select>

        </div>
        <div class=" col-lg-2 col-md-2 col-sm-6  " id="selected_ship">

        </div>
        <div class="col-lg-6 col-md-6 col-sm-12 logs_output" id="logs_output">

        </div>
    </div>
</div>
<div id="trades_output" style="border:1px solid red;">
    {% for system in trades %}
    <h2>{{system}}</h2>
    <table id="trades_{{system}}">

    </table>
    {% endfor %}


    <script>
        function execute_trade(trade_symbol, start_location, end_location, quantity) {
            socket.emit('execute-trade', {
                'ship_name': document.getElementById('list_of_ship_symbols').value,
                'trade_symbol': trade_symbol,
                'start_location': start_location,
                'end_location': end_location,
                'quantity': quantity
            })
        }

        function fetch_ship() {
            new_ship = document.getElementById('list_of_ship_symbols').value;
            socket.emit('fetch-ship-box', new_ship);
        }


        socket.emit('fetch-trades');
        fetch_ship();
    </script>